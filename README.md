# AutoReply

一个简易的自动回复插件

基于 [mamoe/mirai: 高效率 QQ 机器人支持库](https://github.com/mamoe/mirai) 开发的插件

拥有简易的自动回复功能，代码简单，适合上手mirai插件开发时学习

论坛地址 [一个简易的自动回复插件](https://mirai.mamoe.net/topic/1193/一个简易的自动回复插件)

## 使用方法

请按照mirai中的 [文档](https://github.com/mamoe/mirai/blob/dev/docs/UserManual.md) 来确保mirai环境安装完成，然后将release中打包好的插件放入plugins文件夹启动mirai就可以了

## 指令列表

**注意！！！** 要在聊天环境执行指令请先安装 [chat-command](https://github.com/project-mirai/chat-command) 并确认配置好权限，本插件的权限格式为

per.autumn.mirai.autoreply.plugin:command.*

例如：per.autumn.mirai.autoreply.plugin:command.查询所有自动回复

| 指令名称          | 用法                 | 举例             | 备注     |
|---------------|--------------------|----------------|--------|
| 添加自动回复        | /添加自动回复 [关键字] [回复] | /添加自动回复 你好 你好啊 | 详见特殊用法 |
| 移除自动回复        | /移除自动回复 [关键字]      | /移除自动回复 你好     |        |
| 查询所有自动回复      | /查询所有自动回复          | /查询所有自动回复      |        |
| 添加允许自动回复的群聊   | /添加群 [群号]          | /添加群 123456789 |        |
| 移除允许自动回复的群聊   | /移除群 [群号]          | /移除群 123456789 |        |
| 查询所有开启了自动回复的群 | /查询所有群             | /查询所有群         |        |
| 开启私聊回复        | /允许私聊              | /允许私聊          | 默认关闭   |
| 关闭私聊回复        | /禁止私聊              | /禁止私聊          | 默认关闭   |

## 特殊用法

可以通过在执行添加自动回复时插入特殊字符来使用更高级的用法

| 用途             | 内容       | 在关键字中使用 | 在回复中使用 | 举例                              |
|----------------|----------|---------|--------|---------------------------------|
| 引用发送者的消息（回复消息） | ${@q}    | 否       | 是      | /添加自动回复 你好 ${@q}你好啊             |
| @全体成员          | ${@a}    | 否       | 是      | /添加自动回复 你好 ${@a}你好啊             |
| @发送的成员         | ${@s}    | 否       | 是      | /添加自动回复 你好 ${@s}你好啊             |
| 将内容替换成当前时间     | ${now}   | 否       | 是      | /添加自动回复 当前时间 现在时间是：${now}       |
| 将内容替换成当前日期     | ${today} | 否       | 是      | /添加自动回复 今天 今天的日期是：${today}      |
| 将内容替换成当前星期     | ${day}   | 否       | 是      | /添加自动回复 今天星期几 今天是${day}         |
| 计算此处的数学表达式     | ${calc}  | 是       | 是      | /添加自动回复 计算${calc} 计算结果为：${calc} |

计算数学表达式使用的库[exp4j](https://www.objecthunter.net/exp4j)

支持的运算：

- 加: `2 + 2`
- 减: `2 - 2`
- 乘: `2 * 2`
- 除: `2 / 2`
- 乘方: `2 ^ 2`
- 带有符号的数: `+2 - (-2)`
- 模运算: `2 % 2`

内置函数：abs, acos, asin, atan, cbrt, ceil, cos, cosh,exp, floor, log, log10, log2, sin, sih, sqrt, tan, tanh, signum

常数：pi π e φ
